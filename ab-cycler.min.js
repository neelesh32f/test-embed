!function(){"use strict";class t{constructor(t={}){this.config={apiEndpoint:t.apiEndpoint||"https://https://ff09-223-185-131-191.ngrok-free.app",interval:t.interval||3e3,animationDuration:t.animationDuration||300,initDelay:t.initDelay||1e3,...t},this.variations=null,this.currentVariationIndex={},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>this.waitForScriptsAndInit())):this.waitForScriptsAndInit()}waitForScriptsAndInit(){setTimeout((async()=>{"complete"!==document.readyState?window.addEventListener("load",(()=>this.init())):await this.init()}),this.config.initDelay)}async init(){try{await this.fetchVariations(),this.startCycling()}catch(t){console.error("Failed to initialize ABCycler:",t)}}async fetchVariations(){try{if(window.location.href.includes("/products/")){const t=window.location.href.split("/products/")[1].split("/")[0],i=await fetch(`${this.config.apiEndpoint}/planttherapy/products/${t}`);this.variations=await i.json(),alert(this.variations),console.log("Variations: ",this.variations),Object.keys(this.variations).forEach((t=>{this.currentVariationIndex[t]=0}))}}catch(t){throw console.error("Failed to fetch variations:",t),t}}startCycling(){Object.keys(this.variations).forEach((t=>{this.cycleElement(t)}))}cycleElement(t){const i=document.querySelector(t);i&&setInterval((()=>{const n=this.variations[t],a=this.currentVariationIndex[t],e=(a+1)%n.length;this.applyVariation(i,n[a],n[e]),this.currentVariationIndex[t]=e}),this.config.interval)}applyVariation(t,i,n){t.classList.add("ab-cycler-transition"),setTimeout((()=>{this.updateElement(t,n),t.classList.remove("ab-cycler-transition")}),this.config.animationDuration)}updateElement(t,i){i.html&&(t.innerHTML=i.html),i.text&&(t.textContent=i.text),i.attributes&&Object.entries(i.attributes).forEach((([i,n])=>{t.setAttribute(i,n)})),i.styles&&Object.assign(t.style,i.styles)}}window.createABCycler=function(i){return new t(i)}}();
//# sourceMappingURL=ab-cycler.min.js.map
